{
  "question_id" : 44825963,
  "title" : "Cant access viewHolder in a customArrayadapter in another function?",
  "body" : "<p>I am creating an application with a list that list cards based on the value from the server.\nI created a StudentCardArrayAdapter to achieve this and everything works fine. All the data has been populated in card list. also I able to get the values on button click in each card separately.</p>\n\n<p>What I need is on clicking the button it will call a method requestion server for data asynchronously and get a value from the server and according to that value, i need to change the button text in that particular card.</p>\n\n<p>My StudentCardArrayAdapter code:</p>\n\n<pre><code>public class StudentCardArrayAdapter extends ArrayAdapter&lt;StudentCard&gt; {\n    private static final String TAG = \"CardArrayAdapter\";\n    private List&lt;StudentCard&gt; cardList = new ArrayList&lt;StudentCard&gt;();\n    private Context mContext;\n    String selected = \"0\";\n    PreferenceHelper prefs;\n    CardViewHolder viewHolder;\n    View row;\n    ProgressDialog pd;\n    static class CardViewHolder {\n        TextView studentname;\n        TextView stop;\n        Button selectbutton;\n        CircleImageView imageId;\n\n    }\n\n    public StudentCardArrayAdapter(Context context, int textViewResourceId) {\n        super(context, textViewResourceId);\n        this.mContext = context;\n        prefs = new PreferenceHelper(this.mContext);\n        pd = new ProgressDialog(this.mContext);\n    }\n\n    @Override\n    public void add(StudentCard object) {\n        cardList.add(object);\n        super.add(object);\n    }\n\n    @Override\n    public int getCount() {\n        return this.cardList.size();\n    }\n\n    @Override\n    public StudentCard getItem(int index) {\n        return this.cardList.get(index);\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n        row = convertView;\n        if (row == null) {\n            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n            row = inflater.inflate(R.layout.student_card, parent, false);\n            viewHolder = new CardViewHolder();\n            viewHolder.studentname = (TextView) row.findViewById(R.id.studentname);\n            viewHolder.stop = (TextView) row.findViewById(R.id.stop);\n            viewHolder.selectbutton = (Button) row.findViewById(R.id.selectbutton);\n            viewHolder.imageId = (CircleImageView) row.findViewById(R.id.imageId);\n            row.setTag(viewHolder);\n        } else {\n            viewHolder = (CardViewHolder)row.getTag();\n        }\n        StudentCard card = getItem(position);\n\n        viewHolder.studentname.setText(card.getStudName());\n        viewHolder.studentname.setTextColor(Color.parseColor(\"#000000\"));\n\n        viewHolder.stop.setText(card.getStudStop());\n        viewHolder.stop.setTextColor(Color.parseColor(\"#000000\"));\n\n        if(card.getSelected().equals(\"1\")){\n            viewHolder.selectbutton.setText(mContext.getResources().getString(R.string.selected));\n            viewHolder.selectbutton.setEnabled(false);\n        }\n        else{\n            viewHolder.selectbutton.setText(mContext.getResources().getString(R.string.select));\n            viewHolder.selectbutton.setEnabled(true);\n        }\n\n        final String studid = card.getStudId();\n        final String busname = prefs.getString(\"busname\", \"0\");\n        final String schoolid = prefs.getString(\"schoolid\", \"\");\n        viewHolder.selectbutton.setOnClickListener(new View.OnClickListener()\n        {\n            String updatedvalue = \"0\";\n            @Override\n            public void onClick(View v)\n            {\n                Log.e(\"studid\",studid);\n                Log.e(\"busname\",busname);\n                Log.e(\"schoolid\",schoolid);\n                    selectstudent(v, studid, busname, schoolid,mContext);\n                //Toast.makeText(v.getContext(), amountinfo, Toast.LENGTH_SHORT).show();\n                /*SnackbarManager.show(Snackbar.with(this) // context\n                        .text(amountinfo));*/\n            }\n        });\n        Picasso.with(mContext).load(card.getImageUrl()).fit().error(R.mipmap.ic_launcher).into(viewHolder.imageId);\n        return row;\n    }\n\n\n    public void selectstudent(final View v, String studid, String busname, String schoolid, final Context mContext) {\n        String returnedselected = \"0\";\n        Log.e(\"BASE_URL_STUDENT_UPDATE\", Constants.BASE_URL_STUDENT_UPDATE + \"?studid=\" + studid+\"&amp;busname=\"+busname+\"&amp;schoolid=\"+schoolid);\n        RestClientHelper.getInstance().get(Constants.BASE_URL_STUDENT_UPDATE + \"?studid=\" + studid+\"&amp;busname=\"+busname+\"&amp;schoolid=\"+schoolid, new RestClientHelper.RestClientListener() {\n            @Override\n            public void onSuccess(String response) {\n                Log.e(\"RESULT\", response);\n                try {\n\n                    JSONObject result = new JSONObject(response);\n                    JSONArray posts = result.optJSONArray(\"status\");\n                    for (int i = 0; i &lt; posts.length(); i++) {\n                        JSONObject post = posts.optJSONObject(i);\n                        String status = post.optString(\"status\");\n                        if (status.equals(\"true\")) {\n                             selected = post.optString(\"selected\");\n                        } else {\n                             selected = post.optString(\"selected\");\n                            String error = post.optString(\"error\");\n                            SnackbarManager.show(Snackbar.with(getContext()) // context\n                                    .text(error));\n                        }\n                    }\n                } catch (JSONException e) {\n                    e.printStackTrace();\n\n                } catch (Exception e) {\n\n                } finally {\n                    if(selected.equals(\"1\")){\n                        viewHolder.selectbutton.setText(mContext.getResources().getString(R.string.selected));\n                        viewHolder.selectbutton.setEnabled(false);\n                    }\n\n                }\n            }\n\n            @Override\n            public void onError(String error) {\n                Log.e(\"error\", error);\n                selected = \"0\";\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>I used the below code but nothing works.. No error also.. and not change in button text.I get value of selected as 1 from server.</p>\n\n<pre><code>if(selected.equals(\"1\")){\n                        viewHolder.selectbutton.setText(mContext.getResources().getString(R.string.selected));\n                        viewHolder.selectbutton.setEnabled(false);\n                    }\n</code></pre>\n\n<p>I am new to android.. and is stuck here. Please help me out.</p>\n",
  "link" : "https://stackoverflow.com/questions/44825963/cant-access-viewholder-in-a-customarrayadapter-in-another-function",
  "owner" : {
    "user_id" : 8231819,
    "user_type" : "registered",
    "display_name" : "Karthik CP",
    "profile_image" : "https://www.gravatar.com/avatar/a77fca82e655fe64f96124fed47a619a?s=128&d=identicon&r=PG&f=1",
    "link" : "https://stackoverflow.com/users/8231819/karthik-cp",
    "reputation" : 1,
    "accept_rate" : null
  },
  "is_answered" : false,
  "creation_date" : 1498741447,
  "last_activity_date" : 1498743805,
  "tags" : [
    "android",
    "android-arrayadapter"
  ],
  "score" : 0,
  "view_count" : 13,
  "answer_count" : 1
}