{
  "question_id" : 44805975,
  "title" : "Update class name based on scrolling behavior",
  "body" : "<p>I have a React component that renders images in a container. I have a function setup to check on scroll if the scrolling div is at the bottom (this part works). What I need to do is have the class name change on a particular div depending on whether the scroll is at the bottom or not.</p>\n\n<p>Code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import React, { PropTypes } from 'react';\r\nimport * as c from 'constants';\r\nimport ChoiceField from 'components/ChoiceField/ChoiceField';\r\nimport ChoiceFieldImage from 'components/ChoiceFieldImage/ChoiceFieldImage';\r\nimport { noop } from 'utils';\r\n\r\nconst baseCls = `${c.baseClass} OptionsContainer`;\r\n\r\nconst { correct, incorrect, selected } = c.choiceFieldTypes;\r\n\r\nconst getChoiceType = (option) =&gt; {\r\n  const selectedState = option.get('type');\r\n  const isCorrect = option.get('isCorrect');\r\n  const isSelected = selectedState === selected;\r\n  if (isCorrect !== undefined &amp;&amp; isSelected) {\r\n    return isCorrect\r\n      ? correct\r\n      : incorrect;\r\n  }\r\n  return selectedState;\r\n};\r\n\r\nconst gradientState = {\r\n  show: true,\r\n};\r\n\r\nconst showGradient = (value) =&gt; {\r\n  if (value) {\r\n    console.log('show gradient');\r\n    return 'gradient';\r\n  }\r\n  console.log('HIDE gradient');\r\n  return 'no-gradient';\r\n};\r\n\r\nconst scrollIt = function () {\r\n  // console.log('it scrolls');\r\n  const scroller = document.getElementById('gradient-scroller');\r\n  const gradient = document.getElementById('gradient-container');\r\n  // console.log(`scroller: ${scroller}`);\r\n  console.log(`gradient: ${gradient}`);\r\n  const style = window.getComputedStyle(scroller, null);\r\n  const innerHeight = parseInt(style.getPropertyValue('height'), 10);\r\n  const scrollTopInnerHeight = parseInt(scroller.scrollTop + innerHeight, 10);\r\n  console.log(gradientState);\r\n  if (scroller.scrollHeight === scrollTopInnerHeight) {\r\n    console.log('############# bottom hit');\r\n    gradientState.show = null;\r\n    showGradient(gradientState.state);\r\n  } else {\r\n    gradientState.show = true;\r\n    showGradient(gradientState.state);\r\n  }\r\n};\r\n\r\nconst OptionsContainer = ({\r\n  type = 'text',\r\n  options = null,\r\n  onSelect = noop,\r\n}) =&gt; {\r\n  if (options == null) {\r\n    return null;\r\n  }\r\n\r\n  const containerMod = (options.count() === 2\r\n    ? '--few'\r\n    : '');\r\n\r\n  return (\r\n    &lt;div id=\"gradient-wrap\" className={baseCls}&gt;\r\n      &lt;div\r\n        id=\"gradient-scroller\"\r\n        onScroll={scrollIt}\r\n        className={`${baseCls}__container ${containerMod}`}\r\n      &gt;\r\n        {options.map((option, i) =&gt; {\r\n          const choiceType = getChoiceType(option);\r\n          const optionCls = (`${baseCls}${type === 'image'\r\n            ? `__image-option ${choiceType || ''}`\r\n            : '__text-option'}`);\r\n          return (\r\n            &lt;div className={optionCls} key={i} onClick={onSelect.bind(null, option, i)}&gt;\r\n              {type === 'text'\r\n                ? &lt;ChoiceField text={option.get('value')} type={choiceType} /&gt;\r\n                : &lt;ChoiceFieldImage\r\n                  title={option.get('caption')}\r\n                  image={option.get('imageUrl')}\r\n                  type={choiceType}\r\n                /&gt;}\r\n            &lt;/div&gt;\r\n          );\r\n        })}\r\n\r\n      &lt;/div&gt;\r\n      &lt;div id=\"gradient-container\" className={showGradient(gradientState.show)} /&gt;\r\n    &lt;/div&gt;\r\n  );\r\n};\r\n\r\nOptionsContainer.propTypes = {\r\n  type: PropTypes.string,\r\n  options: PropTypes.object.isRequired,\r\n  onSelect: PropTypes.func,\r\n};\r\n\r\nexport default OptionsContainer;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The showGradient function is logging the current data where it should, but the className is not getting updated on this bit:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>&lt;div id=\"gradient-container\" className={showGradient(gradientState.show)} /&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I'm a ReactJS newbie, so any advice is appreciated.</p>\n",
  "link" : "https://stackoverflow.com/questions/44805975/update-class-name-based-on-scrolling-behavior",
  "owner" : {
    "user_id" : 158895,
    "user_type" : "registered",
    "display_name" : "TWLATL",
    "profile_image" : "https://www.gravatar.com/avatar/0d72500b2d3bb1a3698df5e326abf1ca?s=128&d=identicon&r=PG",
    "link" : "https://stackoverflow.com/users/158895/twlatl",
    "reputation" : 2043,
    "accept_rate" : 61
  },
  "is_answered" : false,
  "creation_date" : 1498661600,
  "last_activity_date" : 1498661626,
  "tags" : [
    "javascript",
    "reactjs",
    "state"
  ],
  "score" : 0,
  "view_count" : 8,
  "answer_count" : 0
}